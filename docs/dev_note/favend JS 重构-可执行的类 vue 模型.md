```
2021-09-20 14:56
```

### 原因

elecV2P favend 中的 JS 可能包含 html 部分，直接使用 JS 进行插入，不够优雅。主要是在写的时候，代码编译器默认是 JS 高亮模式，而 html 部分只能通过注释的方式编写，失去了高亮/补齐等特性。于是想可以通过类似 vue 或 react 的结构来设计此部分代码。

比如，html 部分使用 <template></template> 标签进行包裹，JS/api 返回部分使用 <script></script> 标签。当然具体重构的时候可以使用其他 elecV2P 专用标签，细节问题之后再考虑。该方式的主要问题是，此类 JS 文件是不能直接运行的，比如 .vue 文件需要转化才能执行。在 elecV2P 中这类类似 JS 的文件可以叫做，.euv/.evu/.evs/.ejs 等，同样此类细节问题之后再考虑，假如暂时命名为 .evs ，那么 evs 文件必须满足的一点是：可直接运行，至少是在 node 环境下可直接执行（因为 elecV2P 的 favend 本身就运行在 node 环境中）。

### 初步设计

如果按照 node 可运行的标准，其实 .vue 也可以（要不直接使用 vue？本篇完^\_^）。但是每次都使用 node 对 vue 文件进行转化，再返回，可能比较耗时和占用资源（没有具体测试过，耗时和资源占用，不过应该不大可行）。

按照最新的 ES6 module 标准，可以直接 import/export。（但这部分还没有仔细研究过 2021-09-20 15:02 ，得专门学习一下）。已知的是这种模式可以直接在浏览器中运行，不需要服务器提前编译。然后问题是：如何优雅的插入 html 代码（我们最初要解决的问题）。可直接 import html 文件吗？或者先载入 JS ，然后再载入 html？又或者直接将 html/css/js 打成一个包(module)，这个包就是 backend 之前对应的 "JS"。然后这个包是应该以**文件夹**的形式存在，还是**文件**的形式？比如 .evs。

也许可以是一个以 .evs 结尾的文件夹？那么这个文件夹应该怎么以 **module** 的形式发送给前端页面呢？.evs 包含 xx.json 配置文件，指定 html 入口文件，然后 html 文件引入 js/css？

想得太多，而知道的太少。先去看一下 module 前端打包的相关知识。2021-09-20 15:13